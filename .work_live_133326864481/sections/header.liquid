<header class="nav" data-section="header">
  {%- assign about_page_url = '' -%}
  {%- if pages['about'] != blank -%}
    {%- assign about_page_url = pages['about'].url -%}
  {%- elsif pages['about-us'] != blank -%}
    {%- assign about_page_url = pages['about-us'].url -%}
  {%- elsif pages['our-story'] != blank -%}
    {%- assign about_page_url = pages['our-story'].url -%}
  {%- elsif pages['story'] != blank -%}
    {%- assign about_page_url = pages['story'].url -%}
  {%- elsif pages['company'] != blank -%}
    {%- assign about_page_url = pages['company'].url -%}
  {%- else -%}
    {%- assign about_page_url = '/pages/about' -%}
  {%- endif -%}

  {%- assign contact_page_url = '' -%}
  {%- if pages['contact'] != blank -%}
    {%- assign contact_page_url = pages['contact'].url -%}
  {%- elsif pages['contact-us'] != blank -%}
    {%- assign contact_page_url = pages['contact-us'].url -%}
  {%- elsif pages['get-in-touch'] != blank -%}
    {%- assign contact_page_url = pages['get-in-touch'].url -%}
  {%- elsif pages['support'] != blank -%}
    {%- assign contact_page_url = pages['support'].url -%}
  {%- else -%}
    {%- assign contact_page_url = '/pages/contact' -%}
  {%- endif -%}

  {%- assign collections_root_url = '/collections/all' -%}

  <div class="nav__left">
    <a href="{{ routes.root_url }}" class="nav__logo nav__logo--mobile" aria-label="{{ shop.name }}">
      {{ section.settings.logo_text | default: 'SP' }}
    </a>

    <nav class="nav__links" role="navigation" aria-label="Main navigation">
      <a href="{{ routes.root_url }}" class="nav__link{% if request.path == routes.root_url %} nav__link--active{% endif %}">
        Home
      </a>

      <div class="nav__dropdown">
        <a
          href="{{ collections_root_url }}"
          class="nav__link nav__dropdown-trigger{% if request.path contains '/collections' %} nav__link--active{% endif %}"
          aria-haspopup="true"
        >
          Categories
        </a>
        <div class="nav__submenu" role="menu" aria-label="Categories submenu">
          <a href="/collections/all" data-category-handle="earrings" class="nav__submenu-link" role="menuitem">Earrings</a>
          <a href="/collections/all" data-category-handle="rings" class="nav__submenu-link" role="menuitem">Rings</a>
          <a href="/collections/all" data-category-handle="bracelets" class="nav__submenu-link" role="menuitem">Bracelets</a>
          <a href="/collections/all" data-category-handle="pendant" class="nav__submenu-link" role="menuitem">Pendant</a>
          <a href="/collections/all" data-category-handle="necklaces" class="nav__submenu-link" role="menuitem">Necklaces</a>
        </div>
      </div>
    </nav>
  </div>

  <a href="{{ routes.root_url }}" class="nav__brand" aria-label="{{ shop.name }}">
    {%- if section.settings.logo_image != blank -%}
      <img
        class="nav__brand-image"
        src="{{ section.settings.logo_image | image_url: width: 280 }}"
        alt="{{ shop.name }}"
        width="280"
        height="60"
        loading="eager"
      >
    {%- else -%}
      {{ section.settings.desktop_logo_text | default: shop.name }}
    {%- endif -%}
  </a>

  <div class="nav__right">
    <button class="nav__icon-btn" aria-label="Search" type="button">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <circle cx="11" cy="11" r="7"/>
        <line x1="16.5" y1="16.5" x2="21" y2="21"/>
      </svg>
    </button>

    <a href="{{ routes.account_url }}" class="nav__icon-btn" aria-label="Account">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="8" r="4"/>
        <path d="M4 21c0-4.4 3.6-8 8-8s8 3.6 8 8"/>
      </svg>
    </a>

    <a href="{{ routes.cart_url }}" class="nav__cart" aria-label="Cart ({{ cart.item_count }})">
      <span class="nav__cart-icon">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/>
          <line x1="3" y1="6" x2="21" y2="6"/>
          <path d="M16 10a4 4 0 01-8 0"/>
        </svg>
      </span>
      <span class="nav__cart-label">Cart</span>
      <span class="nav__cart-paren">(</span><span class="nav__cart-count">{{ cart.item_count }}</span><span class="nav__cart-paren">)</span>
    </a>

    <button class="nav__hamburger" aria-label="Menu" type="button">
      <span class="nav__hamburger-line"></span>
      <span class="nav__hamburger-line"></span>
      <span class="nav__hamburger-line"></span>
    </button>
  </div>
</header>

<div class="nav__mobile-menu" aria-hidden="true">
  <a href="{{ routes.root_url }}" class="nav__mobile-link">Home</a>

  <details class="nav__mobile-categories">
    <summary class="nav__mobile-link nav__mobile-link--summary">Categories</summary>
    <div class="nav__mobile-submenu">
      <a href="/collections/all" data-category-handle="earrings" class="nav__mobile-sublink">Earrings</a>
      <a href="/collections/all" data-category-handle="rings" class="nav__mobile-sublink">Rings</a>
      <a href="/collections/all" data-category-handle="bracelets" class="nav__mobile-sublink">Bracelets</a>
      <a href="/collections/all" data-category-handle="pendant" class="nav__mobile-sublink">Pendant</a>
      <a href="/collections/all" data-category-handle="necklaces" class="nav__mobile-sublink">Necklaces</a>
    </div>
  </details>

  <div class="nav__mobile-footer">
    <a href="{{ contact_page_url }}" class="nav__mobile-link nav__mobile-link--small">Contact</a>
    <a href="{{ about_page_url }}" class="nav__mobile-link nav__mobile-link--small">About</a>
    <a href="{{ routes.account_url }}" class="nav__mobile-link nav__mobile-link--small">Account</a>
    <a href="{{ routes.cart_url }}" class="nav__mobile-link nav__mobile-link--small">Cart ({{ cart.item_count }})</a>
  </div>
</div>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo Image"
    },
    {
      "type": "text",
      "id": "desktop_logo_text",
      "label": "Desktop Brand Text",
      "default": "Swarna Palace"
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Mobile Logo Text",
      "default": "SP"
    },
    {
      "type": "color",
      "id": "bg_color_override",
      "label": "Background Color Override"
    }
  ],
  "presets": [
    {
      "name": "Header"
    }
  ]
}
{% endschema %}
